<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/w3_style.css">    
<link rel="stylesheet" href="css/common_style.css">
<link rel="stylesheet" href="css/food_style.css">
<title>Cooking with David</title>
</head>
<body>
    
    <!--header-->
<header>
    <h1 id="home">Cooking with David</h1>
</header>
   
    <!--nav movil-->
<nav>
<ul class="menu_movil menu_drop">
    <li><a href="#menu" class="size_icon"> <i class="fa fa-bars"></i> </a>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="recipes.html">Easy Recipes</a></li>
            <li><a href="food_table.html">Seasonal foods</a></li>
            <li><a href="gallery.html">Gallery</a></li>
            <li><a href="#register">Register</a>
                <ul class="menu_drop menu_2">
                    <li> <a href="register.html">Register</a> </li>
                    <li> <a href="#">Contac</a> </li>
                </ul>
            </li>    
        </ul>
    </li>
</ul>
    
    <!--nav pc-->
<ul class="menu_pc menu_drop menu_box">
    <li class="col-3 col-s-3"><a href="index.html">Home</a></li>
    <li class="col-3 col-s-3"><a href="recipes.html">Recipes</a></li>
    <li class="col-3 col-s-3"><a href="food_table.html">Seasonal foods</a></li>
    <li class="col-3 col-s-3"><a href="gallery.html">Gallery</a></li>
    <li class="col-3 col-s-3"><a href="#register">Register</a>  
        <ul>
            <li> <a href="register.html">Register</a> </li>
            <li> <a href="#">Contact</a> </li>
        </ul>
    </li>
</ul>
</nav>
    <!--main-->
<main>
        <h2> Seasonal foods</h2>
    
    <section class="section">
        <div class="col-6 col-s-12">
            
            <h2>Fruits</h2>
            <table id="fruits" border="1"> </table>
            <script>
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() { 
      if (this.readyState == 4 && this.status == 200) { 
        fruitFunction(this); 
      } 
    };

    // Abrimos el archivo que está alojado en el servidor food_fruits.xml
    xmlhttp.open("GET", "food_fruits.xml", true); 
    xmlhttp.send();

    function fruitFunction(xml) { 
      var x, i, xmlDoc, table; 
      
      // Obtenemos un objeto XMLDocument con el contenido del archivo XML del servidor
      xmlDoc = xml.responseXML;
      table = "<tr><th>Spring</th><th>Summer</th><th>Autumn</th><th>Winter</th></tr>";

      // Creamos un objeto para almacenar las frutas por estación
      var fruitsBySeason = {
        "Spring": [],
        "Summer": [],
        "Autumn": [],
        "Winter": []
      };

      // Obtenemos todos los nodos denominados "fruit" del archivo XML
      x = xmlDoc.getElementsByTagName("fruit");

      // Recorremos los elementos "fruit" y almacenamos las frutas en el objeto por estación
      for (i = 0; i < x.length; i++) {
        var name = x[i].getElementsByTagName("name")[0].textContent;
        var season = x[i].getElementsByTagName("season")[0].textContent;
        fruitsBySeason[season].push(name);
      }

      // Obtenemos la cantidad máxima de frutas en una estación
      var maxFruitsCount = Math.max(...Object.values(fruitsBySeason).map(fruits => fruits.length));

      // Construimos la tabla con las frutas
      for (i = 0; i < maxFruitsCount; i++) {
        table += "<tr>";
        table += "<td>" + (fruitsBySeason["Spring"][i] || "") + "</td>";
        table += "<td>" + (fruitsBySeason["Summer"][i] || "") + "</td>";
        table += "<td>" + (fruitsBySeason["Autumn"][i] || "") + "</td>";
        table += "<td>" + (fruitsBySeason["Winter"][i] || "") + "</td>";
        table += "</tr>";
      }

      document.getElementById("fruits").innerHTML = table; 
    } 
  </script>
            
        </div>
    </section>
    <section class="section">
        <div class="col-6 col-s-12">
                         <h2>Vegtables</h2> 
                        <table id="vegetables" border="1"> </table>
            <script>
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() { 
      if (this.readyState == 4 && this.status == 200) { 
        vegetableFunction(this); 
      } 
    };

    // Abrimos el archivo que está alojado en el servidor food_vegetables.xml
    xmlhttp.open("GET", "food_vegetables.xml", true); 
    xmlhttp.send();

    function vegetableFunction(xml) { 
      var x, i, xmlDoc, table; 
      
      // Obtenemos un objeto XMLDocument con el contenido del archivo XML del servidor
      xmlDoc = xml.responseXML;
      table = "<tr><th>Spring</th><th>Summer</th><th>Autumn</th><th>Winter</th></tr>";

      // Creamos un objeto para almacenar las frutas por estación
      var vegetablesBySeason = {
        "Spring": [],
        "Summer": [],
        "Autumn": [],
        "Winter": []
      };

      // Obtenemos todos los nodos denominados "vegetable" del archivo XML
      x = xmlDoc.getElementsByTagName("vegetable");

      // Recorremos los elementos "vegetable" y almacenamos los vegetales en el objeto por estación
      for (i = 0; i < x.length; i++) {
        var name = x[i].getElementsByTagName("name")[0].textContent;
        var season = x[i].getElementsByTagName("season")[0].textContent;
        vegetablesBySeason[season].push(name);
      }

      // Obtenemos la cantidad máxima de vegetales en una estación
      var maxVegetablesCount = Math.max(...Object.values(vegetablesBySeason).map(vegetables => vegetables.length));

      // Construimos la tabla con las frutas
      for (i = 0; i < maxVegetablesCount; i++) {
        table += "<tr>";
        table += "<td>" + (vegetablesBySeason["Spring"][i] || "") + "</td>";
        table += "<td>" + (vegetablesBySeason["Summer"][i] || "") + "</td>";
        table += "<td>" + (vegetablesBySeason["Autumn"][i] || "") + "</td>";
        table += "<td>" + (vegetablesBySeason["Winter"][i] || "") + "</td>";
        table += "</tr>";
      }

      document.getElementById("vegetables").innerHTML = table; 
    } 
  </script>  
        </div>
    </section>    
    
</main>

    <br>
    
    <!--footer-->
<footer>
    <br>
    <div class="footer_top">
        <p class="col-2 col-s-12"><a href="#legal">LEGAL WARNING</a></p>
        <p class="col-2 col-s-12"><a href="#privacy">PRIVACY POLICY</a></p>
        <p class="col-2 col-s-12"><a href="#cookies">COOKIES POLICY</a></p>
        <p class="col-2 col-s-12"><a href="#suscribe">SUSCRIBE</a></p>
    </div>
    <div class="footer_bottom">
        <p class="col-2 col-s-12"><a href="#email">David Hernandez Poveda 2023</a></p>
        <p class="col-2 col-s-12"><a href="http://jigsaw.w3.org/css-validator/check/referer">
        <img style="border:0;width:88px;height:31px"
            src="http://jigsaw.w3.org/css-validator/images/vcss"
            alt="¡CSS Válido!" /></a>
        </p>
        <a href="#home"> <img src="images/index/up.png" alt="up" class="up"></a>
    </div>
    <br>
</footer>
</body>
</html>
